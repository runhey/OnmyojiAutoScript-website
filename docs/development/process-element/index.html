<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-development/process-element">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Process Element | Onmyoji Auto Script</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://github.com/OnmyojiAutoScript-website/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://github.com/OnmyojiAutoScript-website/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://github.com/OnmyojiAutoScript-website/docs/development/process-element"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Process Element | Onmyoji Auto Script"><meta data-rh="true" name="description" content="借助 oas 的 assets 工具，你可以非常方便快捷的创建修改管理 过程元素。"><meta data-rh="true" property="og:description" content="借助 oas 的 assets 工具，你可以非常方便快捷的创建修改管理 过程元素。"><link data-rh="true" rel="icon" href="/OnmyojiAutoScript-website/img/logo.ico"><link data-rh="true" rel="canonical" href="https://github.com/OnmyojiAutoScript-website/docs/development/process-element"><link data-rh="true" rel="alternate" href="https://github.com/OnmyojiAutoScript-website/docs/development/process-element" hreflang="en"><link data-rh="true" rel="alternate" href="https://github.com/OnmyojiAutoScript-website/docs/development/process-element" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/OnmyojiAutoScript-website/blog/rss.xml" title="Onmyoji Auto Script RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/OnmyojiAutoScript-website/blog/atom.xml" title="Onmyoji Auto Script Atom Feed"><link rel="stylesheet" href="/OnmyojiAutoScript-website/assets/css/styles.607f4845.css">
<link rel="preload" href="/OnmyojiAutoScript-website/assets/js/runtime~main.8d02b6d5.js" as="script">
<link rel="preload" href="/OnmyojiAutoScript-website/assets/js/main.86a97a92.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/OnmyojiAutoScript-website/"><div class="navbar__logo"><img src="/OnmyojiAutoScript-website/img/logo.ico" alt="OnmyojiAutoScript" class="themedImage_ToTc themedImage--light_HNdA"><img src="/OnmyojiAutoScript-website/img/logo.ico" alt="OnmyojiAutoScript" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">OnmyojiAutoScript</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/OnmyojiAutoScript-website/docs/user-manual/getting-started">用户手册</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/OnmyojiAutoScript-website/docs/development/preamble">开发文档</a><a href="https://github.com/runhey/OnmyojiAutoScript" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://runhey.github.io/OASX/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">OASX<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/OnmyojiAutoScript-website/docs/development/preamble">导言</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/OnmyojiAutoScript-website/docs/development/pull-request">Pull Request</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/OnmyojiAutoScript-website/docs/development/user-option">用户选项</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/OnmyojiAutoScript-website/docs/development/manipulation-device">操控设备</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/OnmyojiAutoScript-website/docs/development/process-element">过程元素</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/OnmyojiAutoScript-website/docs/development/debugging">调试</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/OnmyojiAutoScript-website/docs/development/log">日志系统</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/OnmyojiAutoScript-website/docs/development/exception">异常</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/OnmyojiAutoScript-website/docs/development/decorators">装饰器</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/OnmyojiAutoScript-website/docs/development/dev-tools">开发工具</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/OnmyojiAutoScript-website/docs/development/game-logic-reuse">游戏逻辑复用</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/OnmyojiAutoScript-website/docs/development/task-example">编写任务示例</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/OnmyojiAutoScript-website/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">过程元素</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Process Element</h1><p>借助 oas 的 assets 工具，你可以非常方便快捷的创建修改管理 <code>过程元素</code>。</p><p>我们考虑这样的情形：在某个固定的坐标下需要识别每一个图片，或者是在某个范围下识别图片，手动输入坐标是一件极其低效的操作，又如何快速的截取所匹配的图片，如何高效稳定的配置这些脚本运行过程中所需要的参数(如图片识别的阈值，识别之后点击的区域，图片的名字等等)。难道说仅仅只是针对图片的吗，ASSETS 工具应该对这类高度同具体的游戏任务相关的实现简便高效的配置，以提高信息的高效使用以及代码的复用。</p><p>下面将详细介绍其具体的使用，但是再此之前我们还需要探讨如何这类<code>Process Element</code>信息的存储问题，首先很自然的希望将其保存为json格式的数据运行时读取，而Alas 将其extracte生成代码。在 oas 里将两者结合，使用 RULE 生成全部的json信息后，extracte生成一个资源类，将其继承即可快速访问assets。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="rule-tool">RULE Tool<a href="#rule-tool" class="hash-link" aria-label="Direct link to RULE Tool" title="Direct link to RULE Tool">​</a></h2><p>在正式介绍使用之前先介绍我们的规则工具，首先修改 <code>./module/config/argument/setting.json</code> 的 <code>branch</code> 为 <code>dev</code>, 这将使你的 oas 变成开发版。启动根目录下的 <code>gui.py</code> 这个是老版本的oas。</p><p>在保证实例成功启动后</p><p><img loading="lazy" src="https://runhey-img-stg1.oss-cn-chengdu.aliyuncs.com/img2/202306221620835.png" alt="image-20230622162055045" class="img_ev3q"></p><p>如果不出意外 oas 会将 模拟器截屏投屏到 界面上</p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>写的时候图快，就没认真当投屏来写。轻点喷</p></div></div><p>点击最上方的<code>Screen Setting</code>  即可出现投屏的设置</p><p><img loading="lazy" src="https://runhey-img-stg1.oss-cn-chengdu.aliyuncs.com/img2/202306221624255.png" alt="image-20230622162429129" class="img_ev3q"></p><ul><li><p>Image Source:  截屏源，可选来自模拟器还是来自本地图片</p></li><li><p>Local Image Name: 本地图片的路径</p></li><li><p>Frame Rate: 帧率默认两帧</p></li><li><p>ROI Model:  两个框的布尔模式默认None, 第二种为Same两个框重叠保持位置大小一致，第三种为包含即前框必须在绿框内。</p><ul><li>红框/前景框/默认框/ROI_Front: 这个是我们后面所使用的默认的一个ROI</li><li>绿框/背景框/备选框/ROI_Back: 备选的框，是否被使用取决于具体的RULE</li></ul><div class="theme-admonition theme-admonition-danger alert alert--danger admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_S0QG"><p>无论什么的时候请不要手贱乱拖动边框，<strong>保持一个良好的习惯</strong></p></div></div><p><img loading="lazy" src="https://runhey-img-stg1.oss-cn-chengdu.aliyuncs.com/img2/202306221628826.png" alt="image-20230622162835061" class="img_ev3q"></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="rule">Rule<a href="#rule" class="hash-link" aria-label="Direct link to Rule" title="Direct link to Rule">​</a></h2><div class="theme-admonition theme-admonition-danger alert alert--danger admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_S0QG"><p>每一种不同的Rule工具都需要单独新建一个json文件，同一种类型的Rule可以有多份json文件
我们鼓励使用多份json文件而不是一直往一个json文件加信息</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="image">Image<a href="#image" class="hash-link" aria-label="Direct link to Image" title="Direct link to Image">​</a></h3><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>绿框表示要识别的图片区域</p><p>红框表示要截图的目标图片</p></div></div><ol><li><p>新建空的<code>image.json</code>文件，路径一般是<code>./tasks/&lt;任务名&gt;/res/</code>。 <code>image.json</code>和<code>res</code>这两个并不是必须的一致这只是约定成俗的。</p></li><li><p>在 oas 的 <code>RULE Tool</code>打开建立的文件</p><p><img loading="lazy" src="https://runhey-img-stg1.oss-cn-chengdu.aliyuncs.com/img2/202306221646425.png" alt="image-20230622164627071" class="img_ev3q"></p></li><li><p>一般打开一个新的右侧列表为空，我们点击<code>New</code>新建一项，修改名字回车，此时发现右下方<code>Item name</code>和<code>Image name</code>也是同步修改（这意味着我们无需手动管理其命名）</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>itme name 仅仅支持 小写字母 + 下划线</p></div></div></li><li><p>配置ROI：这一步非常重要，首先你先确定你所要识别的图片是否会移动，这决定了识别的速率。</p><ul><li>如果是固定的图片: 你需要将<code>Screen Setting</code>的<code>ROI Model</code>切换至<code>Same</code>模式，这个时候我们就可以一起拖动两个框了，你需要将两个框拖动到要识别的图片位置</li><li>如果是非固定的图片：你需要将<code>Screen Setting</code>的<code>ROI Model</code>切换至<code>Include</code>模式，或者是<code>None</code>模式，移动绿框为其可能出现的区域而移动红框到当前目标图片的区域</li></ul></li><li><p>保存目标图片, 点击<code>Save image</code>即可保存图片。<strong>一定不要忘记了保存图片</strong></p></li><li><p>修改其他辅助信息：<code>Threshod</code>表示图片匹配的阈值保存默认即可（因为你还可以在代码中手动设置匹配阈值），<code>Description</code>为描述这一项的代码注释，最后会被提取为注释</p></li><li><p>重复步骤3、4、5、6直到所有的目标图片记录</p></li><li><p>最后点击右边的<code>Save File</code>保存文件，但是建议每隔几个保存一次</p></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="click">Click<a href="#click" class="hash-link" aria-label="Direct link to Click" title="Direct link to Click">​</a></h3><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>红框表示默认的点击区域</p><p>绿框表示备用的点击区域（一般用不到）</p></div></div><p><strong>操作流程同Image一致</strong></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="longclick">LongClick<a href="#longclick" class="hash-link" aria-label="Direct link to LongClick" title="Direct link to LongClick">​</a></h3><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>红框表示默认的点击区域</p><p>绿框表示备用的点击区域（一般用不到）</p></div></div><p><strong>操作流程同Image一致</strong></p><p><code>Duration</code>这个参数表示长按的时间，单位ms</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="swipe">Swipe<a href="#swipe" class="hash-link" aria-label="Direct link to Swipe" title="Direct link to Swipe">​</a></h3><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>红框表示滑动的起始区域</p><p>绿框表示滑动的终止区域</p></div></div><p><strong>操作流程同Image一致</strong></p><p><code>Mode</code>这个参数表示滑动的模式，是模拟人手滑动（赛贝尔曲线）还是直线</p><p><img loading="lazy" src="https://runhey-img-stg1.oss-cn-chengdu.aliyuncs.com/img2/202306221711057.png" alt="image-20230622171154314" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ocr">Ocr<a href="#ocr" class="hash-link" aria-label="Direct link to Ocr" title="Direct link to Ocr">​</a></h3><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>红框表示Ocr的范围</p></div></div><p><img loading="lazy" src="https://runhey-img-stg1.oss-cn-chengdu.aliyuncs.com/img2/202306221718525.png" alt="image-20230622171810801" class="img_ev3q"></p><p>在介绍使用之前我们先针对 OCR 的使用场景进行分析：</p><ol><li>Single:有一块固定的ROI，我能保证里面只有一项字符，无论文字的方向是横的还是竖的</li><li>Full: 有一块相对比较大的ROI，文字的可行的位置不固定，可能会有很多项字符，甚至方向也不确定</li><li>Digit: 有一块固定的ROI，能保证这一项是数字</li><li>DigitCounter:有一块固定的ROI，需要获取计数值，如上图的<code>3/30</code></li><li>Duration:有一块固定的ROI,  需要获取时间<code>01:30:00</code></li></ol><p><strong>操作流程同Image一致</strong></p><ul><li>Mode: 根据使用场景进行选择</li><li>Mothod: Default</li><li>Keyword：如果Mode是Single或者是Full表示要匹配的字符，如果是其他的就不填</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="list">List<a href="#list" class="hash-link" aria-label="Direct link to List" title="Direct link to List">​</a></h3><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>红框表示每一项的范围</p><p>绿框表示整个列表的范围</p></div></div><p><img loading="lazy" src="https://runhey-img-stg1.oss-cn-chengdu.aliyuncs.com/img2/202307052351666.png" alt="image-20230705235135895" class="img_ev3q"></p><p>RuleList的应用场景是为了支持游戏界面中无法一次性展示所有元素的界面操作，但是这并不可以满足所有的滑动列表。</p><p>其底层的接口还是RuleImage 或者是 RuleOcr，还是存在相对的局限性。</p><ul><li><p>如果是基于Ocr来操作，请将Type选为ocr</p><p>为此绿框就是ocr识别所有文字的的区域，不同于其他的Rule工具，RuleList的每一项就是具体游戏的元素，你需要同游戏的顺序一致定义每一项的值，上图中定义了御魂的层数</p><p>为此将方向选中为竖直vertical。</p><p><strong>有一项非常重要</strong>：每一个元素的大小要符合实际的大小，上图中红框的高度同游戏界面中的高度一致，这是为了便于计算每次滑动的距离</p></li><li><p>基于ocr非常大的局限性是，你需要保证游戏界面中仅仅出现你所定义的这些字符</p></li><li><p>如果是基于Image来操作，将Type选为image</p><p>需要多注意的一点是你需要为每一种元素进行截图保存</p><p>！！！<strong>绝大多数场景下建议使用ocr类型的</strong></p></li></ul><h3></h3><h2 class="anchor anchorWithStickyNavbar_LWe7" id="assets">Assets<a href="#assets" class="hash-link" aria-label="Direct link to Assets" title="Direct link to Assets">​</a></h2><p>在生成了所有的json数据后，你需要使用<code>./module/dev_tools/assets_extract.py</code>来将信息提取成Assets</p><p>直接运行<code>assets_extract.py</code>即可，生成<code>./tasks/&lt;任务名&gt;/assets.py</code>文件</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">atom</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">image </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> RuleImage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">atom</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">click </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> RuleClick</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">atom</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">long_click </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> RuleLongClick</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">atom</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">swipe </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> RuleSwipe</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">atom</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ocr </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> RuleOcr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># This file was automatically generated by module/dev_tools/assets_extract.py.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Don&#x27;t modify it manually.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">RealmRaidAssets</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic"># Image Rule Assets</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic"># 点击结界突破的图片 </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   I_REALM_RAID </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> RuleImage</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">roi_front</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">246</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">628</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">63</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">64</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> roi_back</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">246</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">628</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">63</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">64</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> threshold</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0.8</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> method</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;Template matching&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">file</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;./tasks/RealmRaid/res/res_realm_raid.png&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic"># Ocr Rule Assets</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic"># 刷新的时间 </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   O_FRESH_TIME </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> RuleOcr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">roi</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1042</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">582</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">85</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">36</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> area</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> mode</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;Duration&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> method</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;Default&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> keyword</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> name</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;fresh_time&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic"># 右上角 突破卷的数量 </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   O_NUMBER </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> RuleOcr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">roi</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1139</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">13</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">91</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">39</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> area</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> mode</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;DigitCounter&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> method</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;Default&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> keyword</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> name</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;number&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>至此你可以使用这个提取的类来快速的访问 过程元素</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="api">API<a href="#api" class="hash-link" aria-label="Direct link to API" title="Direct link to API">​</a></h2><p>没有特殊说明这些类都是位于<code>./module/atom/</code>文件夹下，这些类是由前面所使用Assets生成的你大可不必在意如何初始化</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ruleimage">RuleImage<a href="#ruleimage" class="hash-link" aria-label="Direct link to RuleImage" title="Direct link to RuleImage">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ruleimagematchself-image-nparray-threshold-float--none---bool">RuleImage.match(self, image: np.array, threshold: float = None) -&gt; bool:<a href="#ruleimagematchself-image-nparray-threshold-float--none---bool" class="hash-link" aria-label="Direct link to RuleImage.match(self, image: np.array, threshold: float = None) -&gt; bool:" title="Direct link to RuleImage.match(self, image: np.array, threshold: float = None) -&gt; bool:">​</a></h4><p>输入一张截屏（1280x720）根据初始化信息判断是否出现</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ruleimagecoordself---tuple">RuleImage.coord(self) -&gt; tuple:<a href="#ruleimagecoordself---tuple" class="hash-link" aria-label="Direct link to RuleImage.coord(self) -&gt; tuple:" title="Direct link to RuleImage.coord(self) -&gt; tuple:">​</a></h4><p>返回默认的ROI（红色框的随机坐标）如 100, 150</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ruleimagecoord_moreself---tuple">RuleImage.coord_more(self) -&gt; tuple:<a href="#ruleimagecoord_moreself---tuple" class="hash-link" aria-label="Direct link to RuleImage.coord_more(self) -&gt; tuple:" title="Direct link to RuleImage.coord_more(self) -&gt; tuple:">​</a></h4><p>返回备选的ROI（绿色框的随机坐标）如 100, 150</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ruleclick">RuleClick<a href="#ruleclick" class="hash-link" aria-label="Direct link to RuleClick" title="Direct link to RuleClick">​</a></h3><ul><li><strong>coord</strong>(self) -&gt; tuple:  同RuleImage.coord</li><li><strong>coored_more</strong>(self) -&gt; tuple:  同RuleImage.coord_more</li><li><strong>center</strong>(self) -&gt; tuple: 返回roi_front的中心坐标</li><li><strong>move</strong>(self, x: int, y: int) -&gt; None: 移动roi_front</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="rulelongclick">RuleLongClick<a href="#rulelongclick" class="hash-link" aria-label="Direct link to RuleLongClick" title="Direct link to RuleLongClick">​</a></h3><ul><li>继承于RuleClick</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ruleswipe">RuleSwipe<a href="#ruleswipe" class="hash-link" aria-label="Direct link to RuleSwipe" title="Direct link to RuleSwipe">​</a></h3><ul><li><strong>coord</strong>(self) -&gt; tuple: 从roi_front随机获取坐标 和从roi_back随机获取的坐标 类似：x1, y1 x2, y2</li><li><strong>trace</strong>(self) -&gt; list: 获取滑动的路径,list的每一项都是tuple 类似：<!-- -->[(x1, y1), (x2, y2)]</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ruleocr">RuleOcr<a href="#ruleocr" class="hash-link" aria-label="Direct link to RuleOcr" title="Direct link to RuleOcr">​</a></h3><ul><li><p><strong>coord</strong>(self) -&gt; tuple: 这个函数要求在使用ocr方法后使用，返回匹配到的文字的一个随机坐标，同时也是roi的坐标</p></li><li><p><strong>ocr</strong>(self, image, keyword=None): 针对不同的模式执行不同的ocr</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">match</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">mode</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> OcrMode</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">FULL</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> Full</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ocr_full</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> image</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> keyword</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> OcrMode</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">SINGLE</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> Single</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ocr_single</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> image</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> OcrMode</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">DIGIT</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> Digit</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ocr_digit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> image</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> OcrMode</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">DIGITCOUNTER</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> DigitCounter</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ocr_digit_counter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> image</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> OcrMode</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">DURATION</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> Duration</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ocr_duration</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> image</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">_</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><code>Full</code> -&gt; tuple:  <strong>检测整个图片的文本,并对结果进行过滤。返回的是匹配到的keyword的区域。如果没有匹配到返回(0, 0, 0, 0)</strong></li><li><code>Single</code> -&gt; str:  返回识别到的字符串</li><li><code>Digit</code> -&gt; int : 返回识别到的数字，如果没有则返回0。<strong>注意这个是int的不是float</strong></li><li><code>DigitCounter</code> -&gt; tuple: 返回识别到的数字计数，如果没有则返回0, 0, 0</li><li><code>Duration</code> -&gt; timedelta:  返回识别到的时间间隔 如果没有则返回timedelta(00:00:00)</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="rulelist">RuleList<a href="#rulelist" class="hash-link" aria-label="Direct link to RuleList" title="Direct link to RuleList">​</a></h3><ul><li><p><strong>self.swipe_pos()</strong></p><p>获取要滑动的两个点的坐标</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">number</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 要滑动的元素个数</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">after</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">bool</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 向前滑动还是向后滑动，水平方向after为右边，竖直方向后after为下边    </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p><strong>self.image_appear()</strong></p><p>判断所定义的图片是否出现</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ndarray  </span><span class="token comment" style="color:#999988;font-style:italic"># 模拟器的截图</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 图片保存的名字，也就是使用工具输入时候的名称</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p><strong>self.ocr_apper()</strong></p><p>判断所定义的文字是否出现</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ndarray  </span><span class="token comment" style="color:#999988;font-style:italic"># 模拟器的截图</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 使用工具输入时候的名字</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="imagegrid">ImageGrid<a href="#imagegrid" class="hash-link" aria-label="Direct link to ImageGrid" title="Direct link to ImageGrid">​</a></h3><p>表示某一个场景中出现的所有的点击图片</p><ul><li><p><strong>self.<!-- -->_<!-- -->_init__()</strong></p><p>底层依赖RuleImage</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">images</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">list</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">RuleImage</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p><strong>self.find_anyone()</strong></p><p>在这些图片中锁定一张图片，返回的是识别到的图片的对象</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/runhey/OnmyojiAutoScript-website/blob/master/docs/development/process-element.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/OnmyojiAutoScript-website/docs/development/manipulation-device"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Manipulation Device</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/OnmyojiAutoScript-website/docs/development/debugging"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Debugging</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#rule-tool" class="table-of-contents__link toc-highlight">RULE Tool</a></li><li><a href="#rule" class="table-of-contents__link toc-highlight">Rule</a><ul><li><a href="#image" class="table-of-contents__link toc-highlight">Image</a></li><li><a href="#click" class="table-of-contents__link toc-highlight">Click</a></li><li><a href="#longclick" class="table-of-contents__link toc-highlight">LongClick</a></li><li><a href="#swipe" class="table-of-contents__link toc-highlight">Swipe</a></li><li><a href="#ocr" class="table-of-contents__link toc-highlight">Ocr</a></li><li><a href="#list" class="table-of-contents__link toc-highlight">List</a></li></ul></li><li><a href="#assets" class="table-of-contents__link toc-highlight">Assets</a></li><li><a href="#api" class="table-of-contents__link toc-highlight">API</a><ul><li><a href="#ruleimage" class="table-of-contents__link toc-highlight">RuleImage</a></li><li><a href="#ruleclick" class="table-of-contents__link toc-highlight">RuleClick</a></li><li><a href="#rulelongclick" class="table-of-contents__link toc-highlight">RuleLongClick</a></li><li><a href="#ruleswipe" class="table-of-contents__link toc-highlight">RuleSwipe</a></li><li><a href="#ruleocr" class="table-of-contents__link toc-highlight">RuleOcr</a></li><li><a href="#rulelist" class="table-of-contents__link toc-highlight">RuleList</a></li><li><a href="#imagegrid" class="table-of-contents__link toc-highlight">ImageGrid</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">其他手游脚本精选</div><ul class="footer__items clean-list"></ul></div><div class="col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/LmeSzinc/AzurLaneAutoScript" target="_blank" rel="noopener noreferrer" class="footer__link-item">AzurLaneAutoScript<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/hgjazhgj/FGO-py" target="_blank" rel="noopener noreferrer" class="footer__link-item">FGO-py<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/MaaAssistantArknights/MaaAssistantArknights" target="_blank" rel="noopener noreferrer" class="footer__link-item">MaaAssistantArknights<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/ArknightsAutoHelper/ArknightsAutoHelper" target="_blank" rel="noopener noreferrer" class="footer__link-item">ArknightsAutoHelper<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/SimonShi1994/Princess-connection-farm" target="_blank" rel="noopener noreferrer" class="footer__link-item">Princess-connection-farm<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/infstellar/genshin_impact_assistant" target="_blank" rel="noopener noreferrer" class="footer__link-item">genshin_impact_assistant<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div></div></footer></div>
<script src="/OnmyojiAutoScript-website/assets/js/runtime~main.8d02b6d5.js"></script>
<script src="/OnmyojiAutoScript-website/assets/js/main.86a97a92.js"></script>
</body>
</html>